<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="spring.bao.mapper.DealIf">

    <select id="filterList" resultType="spring.bao.beans.RequestBean">
		<![CDATA[
		SELECT
			RQ.RQ_CODE AS rqCode,
			RQ.RQ_FILTERCODE AS rqFilterCode,
			RQ.RQ_PERIOD AS  rqPeriod,
			RQ.RQ_TITLE AS rqTitle,
			SG.SG_SUBNAME AS rqSubName,
			MG.MG_IMG AS rqImage,
			ST.ST_CODE rqStatus
			FROM RQ INNER JOIN MG ON RQ.RQ_FILTERCODE = MG.MG_FILTERCODE
        	INNER JOIN SG ON RQ.RQ_SUBCODE = SG.SG_SUBCODE
        	INNER JOIN ST ON RQ.RQ_STCODE = ST.ST_CODE
        	WHERE RQ.RQ_FILTERCODE= ${rqFilterCode}
		]]>
	</select>
	
	<select id="allSearchList" resultType="spring.bao.beans.RequestBean">
		<![CDATA[
		SELECT
			RQ.RQ_CODE AS rqCode,
			RQ.RQ_FILTERCODE AS rqFilterCode,
			RQ.RQ_PERIOD AS  rqPeriod,
			RQ.RQ_TITLE AS rqTitle,
			SG.SG_SUBNAME AS rqSubName,
			MG.MG_IMG AS rqImage,
			ST.ST_CODE rqStatus
			FROM RQ INNER JOIN MG ON RQ.RQ_FILTERCODE = MG.MG_FILTERCODE
        	INNER JOIN SG ON RQ.RQ_SUBCODE = SG.SG_SUBCODE
        	INNER JOIN ST ON RQ.RQ_STCODE = ST.ST_CODE
		]]>
	</select>

    <select id="searchList" resultType="spring.bao.beans.RequestBean">
		<![CDATA[
		SELECT
			RQ.RQ_CODE AS rqCode,
			RQ.RQ_FILTERCODE AS rqFilterCode,
			RQ.RQ_PERIOD AS  rqPeriod,
			RQ.RQ_TITLE AS rqTitle,
			SG.SG_SUBNAME AS rqSubName,
			MG.MG_IMG AS rqImage,
			ST.ST_CODE rqStatus
			FROM RQ INNER JOIN MG ON RQ.RQ_FILTERCODE = MG.MG_FILTERCODE
        	INNER JOIN SG ON RQ.RQ_SUBCODE = SG.SG_SUBCODE
        	INNER JOIN ST ON RQ.RQ_STCODE = ST.ST_CODE
        	WHERE  RQ.RQ_TITLE LIKE '%'||#{rqWord}||'%' OR SG.SG_SUBNAME LIKE '%'||#{rqWord}||'%'
		]]>
	</select>
</mapper>