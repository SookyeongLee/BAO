<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper	namespace="spring.bao.mapper.MessageIf">
<!-- QUERY에 포함된 문자중 < > & || 등이 있다면 xml 파싱을 하지 않도록  -->
	<select	id="getRecList" resultType="spring.bao.beans.MessageBean">
		<![CDATA[
	SELECT MS_MMRECIPIENT AS MSRECIPIENT,
        MS_MMSENDER AS MSSENDER,
        MS_TITLE AS MSTITLE,
        MS_COMMENT AS MSCOMMENT,
        MS_SYSDATE AS MSDATE,
        MS_STCODE AS MSSTATUS 
	FROM MS WHERE MS_MMRECIPIENT='uuul23'
	ORDER BY MS_SYSDATE DESC
		]]>
	
	</select>
	
	<select	id="getSendList" resultType="spring.bao.beans.MessageBean">
		<![CDATA[
	SELECT MS_MMRECIPIENT AS MSRECIPIENT,
        MS_MMSENDER AS MSSENDER,
        MS_TITLE AS MSTITLE,
        MS_COMMENT AS MSCOMMENT,
        MS_SYSDATE AS MSDATE,
        MS_STCODE AS MSSTATUS
    FROM MS WHERE MS_MMSENDER='uuul23'
	ORDER BY MS_SYSDATE DESC
		]]>
	</select>
	
	<select	id="getMsgDetail" resultType="spring.bao.beans.MessageBean">
		<![CDATA[
	SELECT MS_MMRECIPIENT AS MSRECIPIENT,
        MS_MMSENDER AS MSSENDER,
        MS_TITLE AS MSTITLE,
        MS_COMMENT AS MSCOMMENT,
        MS_SYSDATE AS MSDATE,
        MS_STCODE AS MSSTATUS 
	FROM MS WHERE MS_MMSENDER= #{msSender} AND MS_MMRECIPIENT= #{msRecipient} AND TO_CHAR(MS_SYSDATE,'YYYY-MM-DD HH24:MI:SS')= #{msDate} 
		]]>
	</select>
	
	<insert	id="insMessage" >
		<![CDATA[
	INSERT INTO MS(MS_MMRECIPIENT,MS_MMSENDER,MS_TITLE,MS_COMMENT,MS_SYSDATE,MS_STCODE) 
	VALUES (#{msRecipient},#{msSender},#{msTitle},#{msComment},SYSDATE,'N')
		]]>
	</insert>
	
	
	
</mapper>
